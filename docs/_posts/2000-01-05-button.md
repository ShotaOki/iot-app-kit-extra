---
title: タグ→ボタンの置換
author: Shota Oki
date: 2023-08-20
category: Jekyll
layout: post
---

## タグからボタンへの置き換え

TwinMaker のタグを ボタンやテキストに置き換えます

**前提**

TwinMaker のシーンに、任意の名前を付けたタグがあること  
今回は`tag-name-button`の名前を付けます

**リソース**

public 以下に、以下のファイルがあること

- single-content.json  
  TwinMaker の定義ファイル

**ソースコード**

```typescript
import { SceneViewer } from "@iot-app-kit/scene-composer";
import {
  ButtonStyle,
  useOverrideTags,
  DirectSceneLoader,
} from "@iak-extra/scene-composer-extra";

function App() {
  // TwinMakerの定義ファイルをpublicに配置する
  const sceneLoader = new DirectSceneLoader("/single-content.json");

  /** TwinMakerをカスタマイズするコントローラー */
  const controller = useOverrideTags({
    // tag-name-buttonのタグを、ボタンに置き換える
    "tag-name-button": (replaceTag) =>
      replaceTag.toButton
        ?.create({
          angle: 0, // 角度（単位はdegree）
          content: "Close", // ボタンに表示するテキスト
          width: 0.7,
          height: 0.24,
          stateStyle: ButtonStyle.Standard, // ボタンの色を設定する
        })
        .onClickEvent(() => {
          // クリック操作を受けたときのイベントハンドラ
          console.log("clicked: 閉じる");
        }),
  });
  return (
    <div className="App">
      <SceneViewer
        sceneComposerId={controller.composerId}
        sceneLoader={sceneLoader}
        activeCamera="Camera1"
      />
    </div>
  );
}
```

## テキストへの置き換え

クリック操作を受け取る必要がないときは、toText を使ってテキストを設定することもできます

**ソースコード**

```jsx
import { SceneViewer } from "@iot-app-kit/scene-composer";
import {
  useOverrideTags,
  DirectSceneLoader,
} from "@iak-extra/scene-composer-extra";

function App() {
  // TwinMakerの定義ファイルをpublicに配置する
  const sceneLoader = new DirectSceneLoader("/single-content.json");

  /** TwinMakerをカスタマイズするコントローラー */
  const controller = useOverrideTags({
    // tag-name-buttonのタグを、ボタンに置き換える
    "tag-name-text": (replaceTag) =>
      replaceTag.toText
        ?.create({
          angle: 0, // 角度（単位はdegree）
          content: "Text", // ボタンに表示するテキスト
        })
        .onAnimating((text) => {
          // 毎フレーム呼び出される関数
          // text（ThreeMeshUiのテキストクラス）のsetを呼び出して、表示テキストを動的に更新できる
          (text as any).set({
            content: new Date().toISOString().split(".")[0],
          });
        }),
  });

  return (
    <div className="App">
      <SceneViewer
        sceneComposerId={controller.composerId}
        sceneLoader={sceneLoader}
        activeCamera="Camera1"
      />
    </div>
  );
}
```
